langs = ["/languages/ActionScript", "/languages/Ada", "/languages/Apex", "/languages/Arc", "/languages/Arduino", "/languages/ASP", "/languages/Assembly", "/languages/Augeas", "/languages/AutoHotkey", "/languages/Boo", "/languages/Bro", "/languages/C", "/languages/C%23", "/languages/C%2B%2B", "/languages/Clojure", "/languages/CoffeeScript", "/languages/ColdFusion", "/languages/Common%20Lisp", "/languages/Coq", "/languages/D", "/languages/Dart",
"/languages/DCPU-16%20ASM", "/languages/Delphi", "/languages/Dylan", "/languages/eC", "/languages/Eiffel", "/languages/Elixir", "/languages/Emacs%20Lisp", "/languages/Erlang", "/languages/F%23", "/languages/Factor", "/languages/Fancy", "/languages/Fantom", "/languages/FORTRAN",
"/languages/Go", "/languages/Gosu", "/languages/Groovy", "/languages/Haskell", "/languages/HaXe", "/languages/Io", "/languages/Ioke", "/languages/Java", "/languages/Julia", "/languages/Kotlin", "/languages/Logtalk",
"/languages/Lua", "/languages/Matlab"]

langs = [ "/languages/Mirah", "/languages/Nemerle", "/languages/Nimrod", "/languages/Nu", "/languages/Objective-C", "/languages/Objective-J", "/languages/OCaml", "/languages/ooc",
"/languages/Opa", "/languages/OpenEdge%20ABL", "/languages/Parrot", "/languages/Perl", "/languages/PHP", "/languages/PowerShell", "/languages/Prolog", "/languages/Puppet", "/languages/Pure%20Data",
"/languages/Python", "/languages/R", "/languages/Racket", "/languages/Rebol", "/languages/Ruby", "/languages/Rust", "/languages/Scala", "/languages/Scheme", "/languages/Scilab", "/languages/Self",
"/languages/Shell", "/languages/Smalltalk", "/languages/Standard%20ML", "/languages/SuperCollider", "/languages/Tcl", "/languages/Turing", "/languages/Vala", "/languages/Verilog", "/languages/VHDL", "/languages/VimL", "/languages/Visual%20Basic", "/languages/XQuery"]

rankings = {"/languages/ActionScript": 19,
"/languages/Ada": 48,
"/languages/Apex": 72,
"/languages/Arc": 68,
"/languages/Arduino": 37,
"/languages/ASP": 14,
"/languages/Assembly": 18,
"/languages/Augeas": 81,
"/languages/AutoHotkey": 60,
"/languages/Boo": 66,
"/languages/Bro": 85,
"/languages/C": 7,
"/languages/C%23": 12,
"/languages/C%2B%2B": 8,
"/languages/Clojure": 23,
"/languages/CoffeeScript": 11,
"/languages/ColdFusion": 40,
"/languages/Common%20Lisp": 27,
"/languages/Coq": 62,
"/languages/D": 24,
"/languages/Dart": 64,
"/languages/DCPU-16%20ASM": 71,
"/languages/Delphi": 39,
"/languages/Dylan": 75,
"/languages/eC": 65,
"/languages/Eiffel": 58,
"/languages/Elixir": 61,
"/languages/Emacs%20Lisp": 15,
"/languages/Erlang": 25,
"/languages/F%23": 42,
"/languages/Factor": 74,
"/languages/Fancy": 86,
"/languages/Fantom": 88,
"/languages/FORTRAN": 38,
"/languages/Go": 28,
"/languages/Gosu": 47,
"/languages/Groovy": 22,
"/languages/Haskell": 16,
"/languages/HaXe": 46,
"/languages/Io": 55,
"/languages/Ioke": 83,
"/languages/Java": 5,
"/languages/Julia": 77,
"/languages/Kotlin": 80,
"/languages/Logtalk": 89,
"/languages/Lua": 20,
"/languages/Matlab": 31,
'/languages/Verilog': 45, '/languages/ooc': 67, '/languages/Prolog': 21, '/languages/Tcl': 34, '/languages/Visual%20Basic': 30, '/languages/SuperCollider': 33, '/languages/Perl': 9, '/languages/Nemerle': 63, '/languages/Standard%20ML': 57, '/languages/Scilab': 43, '/languages/Python': 3, '/languages/Mirah': 79, '/languages/OpenEdge%20ABL': 59, '/languages/VimL': 13, '/languages/Self': 82, '/languages/Parrot': 78, '/languages/Shell': 4, '/languages/Pure%20Data': 53, '/languages/Scala': 17, '/languages/Racket': 49, '/languages/OCaml': 36, '/languages/VHDL': 50, '/languages/Scheme': 29, '/languages/Nu': 73, '/languages/R': 26, '/languages/XQuery': 56, '/languages/Ruby': 2, '/languages/Rust': 32, '/languages/Smalltalk': 44, '/languages/PHP': 6, '/languages/PowerShell': 41, '/languages/Vala': 51, '/languages/Puppet': 35, '/languages/Turing': 70, '/languages/Objective-C': 10, '/languages/Nimrod': 84, '/languages/Objective-J': 52, '/languages/Opa': 76, '/languages/Rebol': 69}

tiobe = {'ActionScript': '',
'Ada': '0.689%',
'Antlr': '',
'Apache': '',
'APL': '0.24%',
'AppleScript': '',
'Arc': '',
'Arduino': '',
'Assembly': '0.548%',
'Asp': '',
'Awk': '0.251%',
'Bash': '0.584%',
'Basic': '',
'Batch': '',
'BETA': '',
'Bison': '',
'Boo': '',
'Brainfuck': '',
'C': '18.331%',
'C#': '6.668%',
'C++': '9.118%',
'Clojure': '',
'COBOL': '0.438%',
'CoffeeScript': '',
'Common Lisp': '',
'CSS': '',
'D': '0.336%',
'Diff': '',
'Dylan': '',
'Eiffel': '0.343%',
'Erlang': '0.252%',
'F-Script': '',
'F#': '',
'Factor': '',
'Forth': '0.23%',
'Fortran': '0.451%',
'Go': '',
'Graphviz': '',
'Groovy': '',
'HAML': '',
'Haskell': '0.306%',
'HTML': '',
'Ini': '',
'Io': '',
'Java': '16.087%',
'JavaScript': '1.454%',
'JSON': '',
'LaTeX': '',
'Lemon': '',
'Less': '',
'Lex': '',
'Lisp': '0.997%',
'Lua': '0.684%',
'Make': '',
'Markdown': '',
'Matlab': '0.639%',
'Name': '',
'Nemerle': '',
'Nu': '',
'Objective-C': '9.335%',
'Objective-C++': '9.335%',
'Objective-J': '',
'OCaml': '',
'Oz': '',
'Pascal': '0.837%',
'Paws': '',
'Perl': '2.053%',
'PHP': '5.012%',
'Pike': '',
'Plain Text': '',
'PostScript': '',
'Processing': '',
'Prolog': '0.336%',
'Python': '4%',
'R': '0.441%',
'Ragel': '',
'REXX': '',
'Ruby': '1.768%',
'SASS': '',
'Scala': '0.237%',
'Scheme': '0.421%',
'SCSS': '',
'Sed': '',
'Self': '',
'self-ml': '',
'SLang': '',
'Smalltalk': '0.245%',
'Smarty': '',
'SQL': '0.954%',
'Standard ML': '0.224%',
'Tcl': '',
'TeX': '',
'Textile': '',
'Vera': '',
'Verilog': '',
'VHDL': '',
'Visual Basic': '5.695%',
'XML': '',
'YACC': '',
'YAML': '',
'Delphi': '1.157%'}

#print rankings
import operator
import urllib

rankings = { urllib.unquote_plus(k.rpartition('/')[2]): rankings[k] for k in rankings }

for k, v in sorted(rankings.iteritems(), key=operator.itemgetter(1)):
    print urllib.unquote_plus(k) + '\t' + str(v)
print
#rankings = { k): rankings[k] for k in rankings }

def renamekey(d, oldk, newk):
    v = d[oldk]
    del d[oldk]
    d[newk] = v

renamekey(rankings, 'Shell', 'Bash')

for langname in sorted(set(rankings) | set(tiobe)):
    print langname


allrankings = {}
for langname in tiobe.copy():
    x = tiobe[langname]
    if x:
        tiobe[langname] = float(x.strip('%'))
    else:
        tiobe[langname] = -1
    #allrankings[langname] = (tiobe[langname], -1)
    
    #print langname

i = len(tiobe)
for k, v in sorted(tiobe.iteritems(), key=operator.itemgetter(1)):
    if v > -1:
        tiobe[k] = i
    i -= 1

for k in set(tiobe) - set(rankings):
    allrankings[k] = (tiobe[k], -1)
for k in set(rankings) - set(tiobe):
    allrankings[k] = (-1, rankings[k])
for k in set(rankings) & set(tiobe):
    allrankings[k] = (tiobe[k], rankings[k])
#print allrankings

def combinedranking(v):
    t, r = v
    if t == -1 and r == -1:
        return 1000
    if t == -1:
        return r
    if r == -1:
        return t
    return float(t + r) / 2

for k, v in sorted(allrankings.iteritems(), key=lambda x: combinedranking(operator.itemgetter(1)(x))):
    print '%.1f    %s' % (combinedranking(v), k) # + '\t\t\t' +  #str(v[0]) + '\t' + str(v[1])

#print combinedranking((-1, -1))


'''
import urllib2
import re
import time

m = {}

for lang in langs:
    break
    try:
        content = urllib2.urlopen('http://github.com' + lang).read()
        #print content
        idx = int(re.findall('is the #(\d+) most popular language on GitHub', content)[0])
        m[lang] = idx
        print repr(m)
    except Exception as e:
        print 'ERROR: ' + lang
    #print '%s": %d' % (lang, idx)
    #time.sleep(0.3)
    
    
#print repr(m)
'''
